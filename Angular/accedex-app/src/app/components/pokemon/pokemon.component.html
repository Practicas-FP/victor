<div class="page-pokemon">

  <div *ngIf="pokemonsAPI.loadingData; else pokemon" class="container">
    <div class="my-5 row pt-5">
      <div style="display: flex; justify-content: center;" class="col">
        <circle-progress [percent]="95" [radius]="100" [outerStrokeWidth]="16" [innerStrokeWidth]="8"
          [outerStrokeColor]="'#78C000'" [innerStrokeColor]="'#C7E596'" [animation]="true" [animationDuration]="3000">
        </circle-progress>
      </div>
    </div>
  </div>

  <ng-template #pokemon>
    <div *ngIf="!pokemonsAPI.noDataFound; else noPokemonData" class="container my-5">
      <div *ngIf="alert" class="container">
        <app-alert mensaje="{{ alertMessage }}" color="{{ alertColor }}"></app-alert>
      </div>

      <div class="row">
        <h1><span class="font-weight-bold">#{{ pokemons[0].getId() }}</span></h1>
      </div>

      <div class="d-flex py-3">
        <div class="p-2">
          <button (click)="previous()" class="btn btn-primary" [disabled]="disabledPrevious"><i
              class="bi bi-arrow-left"></i> Back</button>
        </div>

        <div class="p-2">
          <button (click)="next()" class="btn btn-primary">Next <i class="bi bi-arrow-right"></i></button>
        </div>
      </div>

      <div class="container">
        <div class="row py-4">
          <div class="col-12 col-lg-4 bg-white mb-3 rounded box-shadow d-flex flex-column justify-content-center">
            <span class="mr-3 text-center">
              <mdb-carousel [class]="'alert-dark'" [isControls]="true" [animation]="'slide'" width="300" height="300">
                <mdb-carousel-item>
                  <img class="d-block w-100" src="{{ pokemons[0].getUrl() }}" alt="First slide">
                </mdb-carousel-item>
                <mdb-carousel-item *ngFor="let image of pokemons[0].getSprintes()">
                  <img class="d-block w-100" src="{{ image }}" alt="First slide">
                </mdb-carousel-item>
              </mdb-carousel>
              <h2 class="mt-4 pb-3 text-capitalize"><span class="font-weight-bold">{{ pokemons[0].getName() }}</span>
              </h2>
            </span>
          </div>

          <div class="col-12 col-lg-8" style="height: 100%">
            <div class="pl-4 bg-white rounded box-shadow p-5">
              <!--p>
                <span *ngFor="let type of pokemons[0].getTypes()"
                  style="background-color: {{ pokemons[0].getColorByType(type) }} ;" class="color-white info_span">{{
                  type
                  }}</span>
              </p-->

              <p class="font-weight-bold">Types: </p>
              <div class="accordion accordion-flush">
                <div class="accordion-item" *ngFor="let type of pokemons[0].getTypes()">
                  <h2 class="accordion-header" id="flush-headingOne">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                      data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                      <span style="background-color: {{ pokemons[0].getColorByType(type) }} ;"
                        class="color-white info_span p-1 px-5">
                        {{type}}
                      </span>
                    </button>
                  </h2>
                  <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne">
                    <div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate
                      the <code>.accordion-flush</code> class. This is the first item's accordion body.</div>
                  </div>
                </div>
              </div>


              <p class="mt-2"><span class="font-weight-bold">Height: </span> {{ pokemons[0].getHeight() + ' | '}} <span
                  class="font-weight-bold">Weight:</span> {{ pokemons[0].getWeight() }} </p>
              <p><span class="font-weight-bold">Abilities:</span> {{ pokemons[0].getAbilities() }}</p>
              <p><span class="font-weight-bold">Base experience:</span> {{ pokemons[0].getBaseExperience() }}</p>
            </div>
          </div>
        </div>

        <div class="row pt-4">
          <h2>Stats</h2>
          <div class="progress mt-3" style="height: 25px;" *ngFor="let stat of pokemons[0].getStats()">
            <div class="progress-bar" role="progressbar"
              style="width: {{ stat.getBaseStat() }}%; background-color: {{ pokemons[0].getColor() }};"
              aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
              <span class="text-uppercase">{{stat.getName() + ' : ' }} <span class="font-weight-bold">{{
                  stat.getBaseStat() }}</span></span>
            </div>
          </div>
        </div>
      </div>

      <div class="row pt-4 justify-content-center">
        <h2>Moves</h2>
        <span *ngFor="let move of pokemons[0].getMoves()" class="color-white info_move me-2 mt-2"
          style="background-color: {{ pokemons[0].getColor() }};">{{ move
          }}</span>
      </div>
    </div>

    <ng-template #noPokemonData>
      <div class="container my-5">
        <div class="alert alert-danger w-100" role="alert">No se ha encontrado el Pok√©mon</div>
      </div>
    </ng-template>
  </ng-template>
</div>
